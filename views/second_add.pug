extends layout

block content
  -var work = !{inquiries} 
  .main.container
    .row.vertical-align
      .col.col-md-2
        p.prev-button(onClick="goBack()")
        
      .col-md-6
        br
        h1.display-5.m-b-2 Dopisz się do wniosku 2/3
        .my-jumbotron
          form(method='POST' action='/second_add')
            div.form-group
              label(for='teacherSurname') Nazwisko prowadzącego:
              input.form-control(type='text', placeholder='Kowalska-Nowak' id='teacherSurname')
            div.form-group
              label(for='teacherName') Imię prowadzącego:
              input.form-control(type='text', placeholder='Anna' id='teacherName')
            div.form-group
              label(for='courseCounselorSurname') Nazwisko opiekuna kursu:
              input.form-control(type='text', placeholder='Romanowski' id='courseCounselorSurname')
            div.form-group
              label(for='courseCounselorName') Imię opiekuna kursu:
              input.form-control(type='text', placeholder='Jan' id='courseCounselorName')            
            div.invisible
              input(type='submit' id='submit-form')
              
      .col.col-md-2
        svg(width="150" height="150")
          path(id="check" d="M10,50 l25,40 l95,-70")
        br
        svg(width="150" height="150")
          path(id="check1" d="M10,50 l25,40 l95,-70")
        
      .col.col-md-2
        label(for='submit-form').next-button
  
  script.
    document.onreadystatechange = () => {
      if (document.readyState === 'complete') {
          $("input").focusout(function(){
            checkTeacher();
            checkCourseCounselor();
          })
        }
      }
    
    function checkTeacher() {
        var teacherName = document.getElementById("teacherName");
        var teacherSurame = document.getElementById("teacherSurame");
        var inquiries= !{(inquiries)};
        if(teacherName.value !== '' && teacherSurname.value !== '') {
          for (var i = 0 ; i < inquiries.length; i++) { 
              if(inquiries[i].ImieProwadzacego == teacherName.value && inquiries[i].NazwiskoProwadzacego == teacherSurname.value) {
                $("#teacherName").css("background-color", "green");
                $("#teacherSurname").css("background-color", "green");
              }
              else {
                $("#teacherName").css("background-color", "white");
                $("#teacherSurname").css("background-color", "white");
              }
          } 
          
        }
    }
    
    function checkCourseCounselor() {
        var courseCounselorName = document.getElementById("courseCounselorName");
        var courseCounselorSurame = document.getElementById("courseCounselorSurame");
        var inquiries= !{(inquiries)};
        if(courseCounselorName.value !== '' && courseCounselorSurname.value !== '') {
          for (var i = 0 ; i < inquiries.length; i++) { 
              if(inquiries[i].ImieOpiekuna == courseCounselorName.value && inquiries[i].NazwiskoOpiekuna == courseCounselorSurname.value ) {
                $("#check1").css("visibility", "visible");
                $("#check1").css("animation", "draw 2s 1 ease forwards");
                $("#courseCounselorName").css("border-color", "green");
                $("#courseCounselorSurname").css("border-color", "green");
              }
              else {
                $("#check1").css("visibility", "hidden");
                $("#courseCounselorName").css("border-color", "");
                $("#courseCounselorSurname").css("border-color", "");
              }
          } 
          
        }
    }
